<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Covariance and Contravariance</title>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                packages: {'[+]': ['ams']}
            },
            svg: {
                fontCache: 'global'
            },
            startup: {
                pageReady: () => {
                    return MathJax.startup.defaultPageReady().then(() => {
                        console.log('MathJax initialized');
                    });
                }
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Georgia', serif;
        }
        
        body {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            color: #333;
            background-color: #f9f9f9;
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        
        h2 {
            color: #2c3e50;
            border-left: 5px solid #3498db;
            padding-left: 15px;
            margin-top: 30px;
        }
        
        h3 {
            color: #2c3e50;
            margin-top: 25px;
        }
        
        .definition, .corollary {
            background-color: white;
            border-radius: 8px;
            padding: 15px 20px;
            margin: 15px 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: box-shadow 0.3s;
        }
        
        .definition:hover, .corollary:hover {
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        .definition {
            border-left: 5px solid #2ecc71;
        }
        
        .corollary {
            border-left: 5px solid #e74c3c;
        }
        
        .eq-number {
            color: #7f8c8d;
            font-weight: bold;
            float: right;
        }
        
        .math {
            font-family: "Times New Roman", serif;
            font-size: 1.1em;
        }
        
        .boxed {
            display: inline-block;
            padding: 5px 10px;
            margin: 5px 0;
            border: 2px solid #3498db;
            border-radius: 4px;
            background-color: #f8f9fa;
        }
        
        .proof-button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9em;
            margin-top: 10px;
            transition: background-color 0.3s;
        }
        
        .proof-button:hover {
            background-color: #2980b9;
        }
        
        .proof-content {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background-color: #f1f8ff;
            border-radius: 6px;
            border-left: 4px solid #3498db;
        }
        
        .proof-content.show {
            display: block;
        }
        
        .proof-header {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 8px;
        }
        
        .qed {
            text-align: right;
            font-weight: bold;
            margin-top: 10px;
        }
        
        ul {
            padding-left: 20px;
        }
        
        li {
            margin-bottom: 10px;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 15px;
            }
            
            .boxed {
                display: block;
                overflow-x: auto;
            }
        }
    </style>
</head>
<body>
    <h1>Covariance and Contravariance</h1>
    
    <h2>1. Definitions</h2>
    
    <div class="definition">
        <div class="math">
            <strong>Covariant basis</strong> of a vector space of dimension \(n\): 
            \(\mathbf{e_j} \triangleq\) {any linearly independent basis for which in general is 
            \(\mathbf{e_i} \cdot \mathbf{e_j} \neq \delta_{ij}\)}, i.e. not necessarily orthonormal.
            <span class="eq-number">(D.1)</span>
        </div>
    </div>
    
    <div class="definition">
        <div class="math">
            <strong>Contravariant components</strong> of a vector \(\mathbf{v}\): 
            \(v^i \triangleq \{ v^i \mid \mathbf{v} = v^i \mathbf{e_i}\}\).
            <span class="eq-number">(D.2)</span>
        </div>
    </div>
    
    <div class="definition">
        <div class="math">
            <strong>Dual (contravariant) basis</strong> of a vector space of dimension \(n\): 
            \(\mathbf{e^i} \triangleq \{ \mathbf{e^i} : \mathbf{e^i} \cdot \mathbf{e_j} = \delta^i_j \}\).
            <span class="eq-number">(D.3)</span>
        </div>
    </div>
    
    <div class="definition">
        <div class="math">
            <strong>Covariant components</strong> of a vector \(\mathbf{v}\): 
            \(v_i \triangleq \{ v_i \mid \mathbf{v} = v_i \mathbf{e^i}\}\).
            <span class="eq-number">(D.4)</span>
        </div>
    </div>
    
    <div class="definition">
        <div class="math">
            <strong>Components of the covariant metric tensor</strong> 
            \(g_{ij} \triangleq \mathbf{e_i} \cdot \mathbf{e_j}\); the metric tensor can be considered a square matrix, since it only has two covariant indices: \(g \triangleq \{ g_{ij} \}\); for the commutative property of the dot product, the \(g_{ij}\) are symmetric.
            <span class="eq-number">(D.5)</span>
        </div>
    </div>
    
    <div class="definition">
        <div class="math">
            <strong>Components of the contravariant metric tensor</strong> 
            \(g^{ij} \triangleq \{ h_{ij} : g^{-1} = \{ h_{ij} \}\}\); these are the elements of the inverse of the covariant metric tensor/matrix \(g^{-1}\), and for the properties of the inverse of a symmetric matrix, they're also symmetric.
            <span class="eq-number">(D.6)</span>
        </div>
    </div>
    
    <h2>2. Corollaries</h2>
    
    <ul>
        <li>
            <div class="corollary">
                <div class="boxed math">\(g^{ij}g_{jk} = \delta^i_k\)</div>
                <span class="eq-number">(1)</span>
                
                <button class="proof-button" onclick="toggleProof('proof1')">Proof</button>
                
                <div id="proof1" class="proof-content">
                    <div class="proof-header">Proof:</div>
                    From the properties of the inverse matrix (D.6).
                </div>
            </div>
        </li>
        
        <li>
            <div class="corollary">
                <div class="boxed math">\(\mathbf{e^i} = g^{ij} \mathbf{e_j}\)</div>
                <span class="eq-number">(2)</span>
                
                <button class="proof-button" onclick="toggleProof('proof2')">Proof</button>
                
                <div id="proof2" class="proof-content">
                    <div class="proof-header">Proof:</div>
                    Let's suppose that \(\{A^{ij} \mid \mathbf{e^i} = A^{ij} \mathbf{e_j}\}\); we will show that \(A^{ij} = g^{ij}\). 
                    Taking the dot product of both sides with \(\mathbf{e_k}\):
                    \(\mathbf{e^i} \cdot \mathbf{e_k} = (A^{ij} \mathbf{e_j}) \cdot \mathbf{e_k} \stackrel{\text{(D.3,D.5)}}{\to} A^{ij}g_{jk} = \delta^i_k\); 
                    multiplying both sides by \(g^{mk}\):
                    \(g^{mk}A^{ij}g_{jk} = g^{mk}\delta^i_k \stackrel{\text{(D.5)}}{\to} g^{mk}g_{kj}A^{ij} = g^{mi} \stackrel{\text{(1)}}{\to} \delta^m_j A^{ij} = g^{mi} \to A^{im} = g^{mi}\stackrel{\text{(D.6)}}{=} g^{im},\ \text{Q.E.D.}\)
                    <div class="qed">∎</div>
                </div>
            </div>
        </li>
        
        <li>
            <div class="corollary">
                <div class="boxed math">\(\mathbf{e^i} \cdot \mathbf{e^j} = g^{ij}\)</div>
                <span class="eq-number">(3)</span>
                
                <button class="proof-button" onclick="toggleProof('proof3')">Proof</button>
                
                <div id="proof3" class="proof-content">
                    <div class="proof-header">Proof:</div>
                    \(\mathbf{e^i} \stackrel{\text{(2)}}{=} g^{ik} \mathbf{e_k}; \mathbf{e^j} \stackrel{\text{(2)}}{=} g^{jm} \mathbf{e_m} \to \mathbf{e^i} \cdot \mathbf{e^j} = g^{ik} g^{jm} (\mathbf{e_k} \cdot \mathbf{e_m}) \stackrel{\text{(D.5)}}{=} g^{ik}g^{jm}g_{km} \stackrel{\text{(1)}}{=} \delta^i_m g^{jm} = g^{ji} \stackrel{\text{(D.6)}}{=} g^{ij},\ \text{Q.E.D.}\)
                    <div class="qed">∎</div>
                </div>
            </div>
        </li>
        
        <li>
            <div class="corollary">
                <div class="boxed math">\(\mathbf{e_i} = g_{ij} \mathbf{e^j}\)</div>
                <span class="eq-number">(4)</span>
                
                <button class="proof-button" onclick="toggleProof('proof4')">Proof</button>
                
                <div id="proof4" class="proof-content">
                    <div class="proof-header">Proof:</div>
                    Let's suppose that \(\{B_{ij} \mid \mathbf{e_i} = B_{ij} \mathbf{e^j}\}\); we will show that \(B_{ij} = g_{ij}\). 
                    Taking the dot product of both sides with \(\mathbf{e^k}\): 
                    \(\mathbf{e_i} \cdot \mathbf{e^k} = (B_{ij} \mathbf{e^j}) \cdot \mathbf{e^k} \stackrel{\text{(D.3,3)}}{\to} B_{ij}g^{jk} = \delta_i^k\); 
                    multiplying both sides by \(g_{mk}\):
                    \(g_{mk}B_{ij}g^{jk} = g_{mk}\delta_i^k \stackrel{\text{(D.5)}}{\to} g_{mk}g^{kj}B_{ij} = g_{mi} \stackrel{\text{(1)}}{\to} \delta_m^j B_{ij} = g_{mi} \to B_{im} = g_{mi} \stackrel{\text{(D.5)}}{=} g_{im},\ \text{Q.E.D.}\)
                    <div class="qed">∎</div>
                </div>
            </div>
        </li>
        
        <li>
            <div class="corollary">
                <div class="boxed math">\(v^i = g^{ij} v_j\)</div>
                <span class="eq-number">(5)</span>
                
                <button class="proof-button" onclick="toggleProof('proof5')">Proof</button>
                
                <div id="proof5" class="proof-content">
                    <div class="proof-header">Proof:</div>
                    \(\mathbf{v} \stackrel{\text{(D.2)}}{=} v^i \mathbf{e_i}; \mathbf{v} \stackrel{\text{(D.4)}}{=} v_j \mathbf{e^j} \stackrel{\text{(2)}}{=} v_j(g^{ji} \mathbf{e_i}) \to v^i \mathbf{e_i} = v_j g^{ji} \mathbf{e_i}, \forall i \to v^i = g^{ji}v_j \stackrel{\text{(D.6)}}{=} g^{ij} v_j,\ \text{Q.E.D.}\)
                    <div class="qed">∎</div>
                </div>
            </div>
        </li>
        
        <li>
            <div class="corollary">
                <div class="boxed math">\(v_i = g_{ij} v^j\)</div>
                <span class="eq-number">(6)</span>
                
                <button class="proof-button" onclick="toggleProof('proof6')">Proof</button>
                
                <div id="proof6" class="proof-content">
                    <div class="proof-header">Proof:</div>
                    Specular to (5).
                    <div class="qed">∎</div>
                </div>
            </div>
        </li>
        
        <li>
            <div class="corollary">
                <div class="boxed math">\(v_i = \mathbf{v} \cdot \mathbf{e_i}\)</div>
                <span class="eq-number">(7)</span>
                
                <button class="proof-button" onclick="toggleProof('proof7')">Proof</button>
                
                <div id="proof7" class="proof-content">
                    <div class="proof-header">Proof:</div>
                    \(\mathbf{v} \cdot \mathbf{e_i} \stackrel{\text{(D.4)}}{=} (v_j \mathbf{e^j}) \cdot \mathbf{e_i} \stackrel{\text{(D.3)}}{=} v_j \delta^j_i = v_i,\ \text{Q.E.D.}\)
                    <div class="qed">∎</div>
                </div>
            </div>
        </li>
        
        <li>
            <div class="corollary">
                <div class="boxed math">\(v^i = \mathbf{v} \cdot \mathbf{e^i}\)</div>
                <span class="eq-number">(8)</span>
                
                <button class="proof-button" onclick="toggleProof('proof8')">Proof</button>
                
                <div id="proof8" class="proof-content">
                    <div class="proof-header">Proof:</div>
                    Specular to (7).
                    <div class="qed">∎</div>
                </div>
            </div>
        </li>
        
        <li>
            <div class="corollary">
                <div class="boxed math">\(\mathbf{u} \cdot \mathbf{v} = g_{ij}u^iv^j\)</div>
                <span class="eq-number">(9)</span>
                
                <button class="proof-button" onclick="toggleProof('proof9')">Proof</button>
                
                <div id="proof9" class="proof-content">
                    <div class="proof-header">Proof:</div>
                    \(\mathbf{u} \cdot \mathbf{v} \stackrel{\text{(D.2)}}{=} (u^i\mathbf{e_i}) \cdot (v^j\mathbf{e_j}) = (\mathbf{e_i} \cdot \mathbf{e_j})u^iv^j \stackrel{\text{(D.5)}}{=} g_{ij}u^iv^j,\ \text{Q.E.D.}\)
                    <div class="qed">∎</div>
                </div>
            </div>
        </li>
        
        <li>
            <div class="corollary">
                <div class="boxed math">\(\mathbf{u} \cdot \mathbf{v} = g^{ij}u_iv_j\)</div>
                <span class="eq-number">(10)</span>
                
                <button class="proof-button" onclick="toggleProof('proof10')">Proof</button>
                
                <div id="proof10" class="proof-content">
                    <div class="proof-header">Proof:</div>
                    Specular to (9).
                    <div class="qed">∎</div>
                </div>
            </div>
        </li>
    </ul>

    <h2>3. Derivatives</h2>
    
    <div class="definition">
        <div class="math">
            Let \(V\) be a vector space and \(f:V\to \mathbb{R}\). For \(u\in V\), the derivative of \(f\) in the direction of \(u\), written \(\partial[u]f : V \to \mathbb{R}\), is defined by
            \[
            \partial[u]f(v) = \lim_{h\to 0} \frac{f(v+hu)-f(v)}{h}
            \]
            if this limit exists.
            <span class="eq-number"></span>
        </div>
    </div>
    
    <div class="definition">
        <div class="math">
            If \(V=\mathbb{R}^n\) and \(\hat x_1,\dots,\hat x_n\) is the standard basis, we get
            \[
            \partial[\hat x_i]f(x_1,\dots,x_n) = \lim_{h\to 0} \frac{f(\dots,x_i+h,\dots)-f(\dots,x_i,\dots)}{h} = \partial_i f(x_1,\dots,x_n)
            \]
            which is the familiar partial derivative.
            <span class="eq-number"></span>
        </div>
    </div>
    
    <div class="definition">
        <div class="math">
            Let \(\mathbf{e}\) and \(\mathbf{\bar e}\) be two bases of a vector space \(V\) of dimension \(n\). We will prove that \(\partial[e_i]\partial[e^i]f = \partial[\bar e_i]\partial[\bar e^i]f\).
            <span class="eq-number"></span>
        </div>
    </div>
    
    <div class="definition">
        <div class="math">
            The metric tensors have components \(g_{ij} = e_i\cdot e_j\) and \(\bar g_{ij} = \bar e_i \cdot \bar e_j\).
            <span class="eq-number"></span>
        </div>
    </div>
    
    <div class="definition">
        <div class="math">
            Let \(\Lambda\) be the change of basis matrix: \( e_i = \Lambda_i^j \bar e_j \).
            <span class="eq-number"></span>
        </div>
    </div>
    
    <ul>
        <li>
            <div class="corollary">
                <div class="boxed math">\(e^i = g^{ij}\Lambda^k_j\bar g_{kl}\bar e^l\)</div>
                <span class="eq-number">(11)</span>
        
                <button class="proof-button" onclick="toggleProof('proof11')">Proof</button>
        
                <div id="proof11" class="proof-content">
                    <div class="proof-header">Proof:</div>
                    \(e^i = g^{ij}e_j = g^{ij}\Lambda_j^k\bar e_k = g^{ij}\Lambda_j^k\bar g_{kl}\bar e^l\).
                    <div class="qed">∎</div>
                </div>
            </div>
        </li>
        
        <li>
            <div class="corollary">
                <div class="boxed math">\(\partial[u+v]f = \partial[u]f+\partial[v]f\)</div>
                <span class="eq-number">(15)</span>
        
                <button class="proof-button" onclick="toggleProof('proof15')">Proof</button>
        
                <div id="proof15" class="proof-content">
                    <div class="proof-header">Proof:</div>
                    \begin{align*}
                    \partial[u+v] f(w) - \partial[u]f(w) - \partial[v]f(w)
                    &= \lim_{h\to 0} \frac{f(w+hu+hv)-f(w)}{h}-\lim_{h\to 0}\frac{f(w+hu)-f(w)}{h}-\lim_{h\to 0}\frac{f(w+hv)-f(w)}{h}\\
                    &= \lim_{h\to 0} \frac{f(w+hu+hv)-f(w+hu)}{h}-\lim_{h\to 0}\frac{f(w+hv)-f(w)}{h}\\
                    &= \lim_{h\to 0} \partial[v] f(w+hu) - \partial[v] f(w)\\
                    &= 0
                    \end{align*}
                    <div class="qed">∎</div>
                </div>
            </div>
        </li>
        
        <li>
            <div class="corollary">
                <div class="boxed math">\(\partial[cu]f = c\partial[u]f\)</div>
                <span class="eq-number">(16)</span>
        
                <button class="proof-button" onclick="toggleProof('proof16')">Proof</button>
        
                <div id="proof16" class="proof-content">
                    <div class="proof-header">Proof:</div>
                    \(\partial[cu] f(v)
                    = \lim_{h\to 0} \frac{f(v+hcu)-f(v)}{h}
                    = c\lim_{h\to 0} \frac{f(v+hcu)-f(v)}{ch}
                    = c\partial[u] f(v)\)
                    <div class="qed">∎</div>
                </div>
            </div>
        </li>
        
        <li>
            <div class="corollary">
                <div class="boxed math">\(\partial[e_i]\partial[e^i]f = \partial[\bar e_i]\partial[\bar e^i]f\)</div>
                <span class="eq-number">(17)</span>
        
                <button class="proof-button" onclick="toggleProof('proof17')">Proof</button>
        
                <div id="proof17" class="proof-content">
                    <div class="proof-header">Proof:</div>
                    \(\partial[e_i]\partial[e^i]f
                    = \partial[\Lambda^k_i\bar e_k]\partial[g^{ij}\Lambda^l_j \bar g_{lm}\bar e^m]f
                    = \Lambda^k_i g^{ij}\Lambda^l_j \bar g_{lm}\partial[\bar e_k]\partial[\bar e^m]f
                    = \bar g^{kl} \bar g_{lm}\partial[\bar e_k]\partial[\bar e^m]f
                    = \partial[\bar e_k]\partial[\bar e^k]f\)
                    <div class="qed">∎</div>
                </div>
            </div>
        </li>
    </ul>
    
    <h2>Debug Page</h2>
    <a href="../debug.html">Go to Another Page</a>

    <div style="text-align: center; margin-top: 40px; color: #7f8c8d; font-size: 0.9em;">
        Covariance and Contravariance • Click "Proof" to show/hide proofs
    </div>

    <script>
        function toggleProof(proofId) {
            const proofContent = document.getElementById(proofId);
            const isVisible = proofContent.classList.contains('show');
            
            // Toggle the proof visibility
            proofContent.classList.toggle('show');
            
            // Update button text
            const button = proofContent.previousElementSibling;
            if (!isVisible) {
                button.textContent = 'Hide Proof';
            } else {
                button.textContent = 'Proof';
            }
            
            // If showing proof, typeset any new math
            if (!isVisible && typeof MathJax !== 'undefined') {
                MathJax.typesetPromise([proofContent]);
            }
        }
    </script>
</body>
</html>
